{"version":3,"sources":["payment.js"],"names":["express","require","router","Router","process","env","STRIPE_API_SECRET","createStripe","req","res","console","log","body","stripe","charges","amount","toFixed","currency","description","concat","title","source","token","post","_context","t0","message","status","json"],"mappings":"aAAA,IAAMA,QAAUC,QAAQ,WAClBC,OAASF,QAAQG,SADjBH,aAAiBC,QAAC,UAClBC,OAASF,aAAAI,QAAfC,IAAAC,mBACAJ,OAAMK,KAAAA,WAAeN,SAAQO,EAA7BC,GAAqBR,IAAAA,EAAAA,EAAAA,OAAAA,mBAAAA,MAAAA,SAAAA,GAAAA,OAAAA,OAAAA,EAAAA,KAAAA,EAAAA,MAAAA,KAAAA,EAAAA,OAKnBS,QAAQC,IAAIH,EAAII,MALGX,EAAAA,KAAAA,EAAAA,EAAAA,KAAAA,EAAAA,mBAAAA,MAIGY,OAAAC,QAAON,OAAP,CAAAO,QAAA,IAAAP,EAAAI,KAAAG,QAAAC,QAAA,GAMlBC,SAAU,MANQC,YAAA,0BAAAC,OAAAX,EAAAI,KAAAQ,OAAAC,OAAAb,EAAAI,KAAAU,SAJHrB,KAAAA,EAAAA,EAAAA,EAAAA,KAIdsB,EAJctB,EAIdsB,OACLb,EAAAA,KAAAA,CAAAA,OAAAA,IALmBT,EAAAA,KAAAA,GAAAA,MAAAA,KAAAA,EAAAA,EAAAA,KAAAA,EAAAA,EAAAA,GAAAA,EAAAA,MAAAA,GAIGS,QAAAC,IAAAa,EAAAC,GAAAC,SAAAjB,EAAAkB,OAAA,KAAAC,KAAA,CAAAF,QAAAF,EAAAC,GAIGZ,UARNZ,KAAAA,GAAAA,IAAAA,MAAAA,OAAAA,EAAAA,SAAAA,KAAAA,KAAAA,CAAAA,CAAAA,EAAAA,OAYfoB,OAAAA,QAAAA","file":"payment.min.js","sourcesContent":["const express = require(\"express\");\nconst router = express.Router();\nconst createStripe = require(\"stripe\");\n//stripe api secret key\nconst stripe = createStripe(process.env.STRIPE_API_SECRET);\n\nrouter.post(\"/payment\", async (req, res) => {\n  console.log(req.body);\n  try {\n    // on envoie le token a Stripe avec le montant\n    let { status } = await stripe.charges.create({\n      amount: (req.body.amount * 100).toFixed(0),\n      currency: \"eur\",\n      description: `Paiement vinted pour : ${req.body.title}`,\n      source: req.body.token,\n    });\n   \n    res.json({ status });\n  } catch (error) {\n    console.log(error.message);\n    res.status(500).json({ message: error.message });\n  }\n});\n\nmodule.exports = router;\n"]}