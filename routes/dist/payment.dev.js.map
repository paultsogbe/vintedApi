{"version":3,"sources":["payment.js"],"names":["express","require","router","Router","createStripe","stripe","process","env","STRIPE_API_SECRET","post","req","res","console","log","body","charges","create","amount","toFixed","currency","description","title","source","token","status","json","message","module","exports"],"mappings":";;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAMC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAf;;AACA,IAAMC,YAAY,GAAGH,OAAO,CAAC,QAAD,CAA5B,C,CACA;;;AACA,IAAMI,MAAM,GAAGD,YAAY,CAACE,OAAO,CAACC,GAAR,CAAYC,iBAAb,CAA3B;AAEAN,MAAM,CAACO,IAAP,CAAY,UAAZ,EAAwB,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;;AAAA;AAAA;AAAA;AAAA;AACtBC,UAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,IAAhB;AADsB;AAAA;AAAA,0CAIGT,MAAM,CAACU,OAAP,CAAeC,MAAf,CAAsB;AAC3CC,YAAAA,MAAM,EAAE,CAACP,GAAG,CAACI,IAAJ,CAASG,MAAT,GAAkB,GAAnB,EAAwBC,OAAxB,CAAgC,CAAhC,CADmC;AAE3CC,YAAAA,QAAQ,EAAE,KAFiC;AAG3CC,YAAAA,WAAW,mCAA4BV,GAAG,CAACI,IAAJ,CAASO,KAArC,CAHgC;AAI3CC,YAAAA,MAAM,EAAEZ,GAAG,CAACI,IAAJ,CAASS;AAJ0B,WAAtB,CAJH;;AAAA;AAAA;AAIdC,UAAAA,MAJc,QAIdA,MAJc;AAWpBb,UAAAA,GAAG,CAACc,IAAJ,CAAS;AAAED,YAAAA,MAAM,EAANA;AAAF,WAAT;AAXoB;AAAA;;AAAA;AAAA;AAAA;AAapBZ,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAMa,OAAlB;AACAf,UAAAA,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,YAAAA,OAAO,EAAE,YAAMA;AAAjB,WAArB;;AAdoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAxB;AAkBAC,MAAM,CAACC,OAAP,GAAiB1B,MAAjB","sourcesContent":["const express = require(\"express\");\nconst router = express.Router();\nconst createStripe = require(\"stripe\");\n//stripe api secret key\nconst stripe = createStripe(process.env.STRIPE_API_SECRET);\n\nrouter.post(\"/payment\", async (req, res) => {\n  console.log(req.body);\n  try {\n    // on envoie le token a Stripe avec le montant\n    let { status } = await stripe.charges.create({\n      amount: (req.body.amount * 100).toFixed(0),\n      currency: \"eur\",\n      description: `Paiement vinted pour : ${req.body.title}`,\n      source: req.body.token,\n    });\n   \n    res.json({ status });\n  } catch (error) {\n    console.log(error.message);\n    res.status(500).json({ message: error.message });\n  }\n});\n\nmodule.exports = router;\n"],"file":"payment.dev.js"}