"use strict";var User=require("../models/User"),isAuthenticated=function(t,r,a){var s,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.headers.authorization)return s=t.headers.authorization.replace("Bearer ",""),e.next=5,regeneratorRuntime.awrap(User.findOne({token:s}).select("account _id"));e.next=14;break;case 5:if(!(n=e.sent)){e.next=11;break}t.user=n,a(),e.next=12;break;case 11:return e.abrupt("return",r.status(401).json({message:"Unauthorized"}));case 12:e.next=15;break;case 14:return e.abrupt("return",r.status(401).json({message:"Unauthorized"}));case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),r.status(500).json({message:e.t0.message});case 20:case"end":return e.stop()}},null,null,[[0,17]])};module.exports=isAuthenticated;
//# sourceMappingURL=isAuthenticated.min.js.map
